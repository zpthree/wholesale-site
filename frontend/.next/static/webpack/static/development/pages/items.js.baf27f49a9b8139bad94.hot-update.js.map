{"version":3,"file":"static/webpack/static/development/pages/items.js.baf27f49a9b8139bad94.hot-update.js","sources":["webpack:///./components/Pagination.js"],"sourcesContent":["import gql from 'graphql-tag';\nimport { Query } from 'react-apollo';\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport { itemsPerPage } from '../config';\nimport PaginationStyles from './styles/PaginationStyles';\n\nconst PAGINATION_QUERY = gql`\n  query PAGINATION_QUERY($dept: String) {\n    itemsConnection(where: { department_contains: $dept }) {\n      aggregate {\n        count\n      }\n    }\n  }\n`;\n\nconst Pagination = props => (\n  <Query query={PAGINATION_QUERY} variables={{ dept: props.dept }}>\n    {({ loading, error, data }) => {\n      if (loading) return <p>Loading...</p>;\n      const { count } = data.itemsConnection.aggregate;\n      const pages = Math.ceil(count / itemsPerPage);\n      const { page } = props;\n      const dept = props.dept ? props.dept : null;\n      const pageCount =\n        page * itemsPerPage < count ? page * itemsPerPage : count;\n\n      let prev = { page: page - 1 };\n      let next = { page: page + 1 };\n\n      if (dept) {\n        prev = { dept, ...prev };\n        next = { dept, ...next };\n      }\n\n      return (\n        <PaginationStyles>\n          <Head>\n            <title>\n              Wholesale | Page {page} of {pages}\n            </title>\n          </Head>\n          {count > 0 ? (\n            <>\n              <Link prefetch href={{ pathname: 'items', query: { ...prev } }}>\n                <a className=\"prev\" aria-disabled={page <= 1}>\n                  Prev\n                </a>\n              </Link>\n              <p>\n                Page {page} of {pages}\n              </p>\n              {/* <p>\n            Showing {pageCount} of {count} Results\n          </p> */}\n              <Link prefetch href={{ pathname: 'items', query: { ...next } }}>\n                <a className=\"next\" aria-disabled={page >= pages}>\n                  Next\n                </a>\n              </Link>\n            </>\n          ) : (\n            <h1>No items to display</h1>\n          )}\n        </PaginationStyles>\n      );\n    }}\n  </Query>\n);\n\nexport default Pagination;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AASA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAGA;AAHA;AAKA;AACA;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAlDA;AACA;AAqDA;;;;A","sourceRoot":""}